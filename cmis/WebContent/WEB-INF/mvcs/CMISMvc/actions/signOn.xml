<?xml version="1.0" encoding="UTF-8" ?>
<actionDefines>
	<classMap>
		<map id="action" class="com.yucheng.cmis.ad.mvc.ADRequestController"/>
		<map id="flowInvoker" class="com.yucheng.cmis.ad.mvc.ADFlowInvoker"/>
		<map id="outputViews" class="java.util.HashMap"/>
		<map id="output" class="com.ecc.emp.data.KeyedCollection"/>
		<map id="kColl" class="com.ecc.emp.data.KeyedCollection"/>
		<map id="iColl" class="com.ecc.emp.data.IndexedCollection"/>
		<map id="field" class="com.ecc.emp.data.DataField"/>
	</classMap>
	<!-- 打开登陆页面 -->
	<action id="signOn" type="normal" checkSession="false">
		<jspView id="signOnAuto.jsp" url="core/signOnAuto.jsp"/>
	</action>
	<action id="signOnAuto" type="normal" checkSession="false">
		<jspView id="signOn.jsp" url="core/signOn.jsp"/>
	</action>
	<!-- 客户托管登入选择 -->
	<action id="checkUserSignOn" userIdField="currentUserId" sessionContextName="APPSessionCtx" sessionIdFieldName="EMP_SID" type="session" class="com.yucheng.cmis.ad.mvc.ADSessionRequestController" checkSession="false">
		<flowInvoker>
			<operation class="com.yucheng.cmis.pub.base.CMISUserCheckOperation4CusTrustee"/>
			<transition dest="core/userSignOnCusTrustee.jsp" condition="$retValue='success'"/>
			<transition dest="core/userSignOnMain.jsp" condition="$retValue='main'"/>
			<transition dest="core/signOnError.jsp" condition="$retValue='fail'"/>
			<transition dest="core/single.jsp" condition="$retValue='single'"/>
		</flowInvoker>
	</action>
	
	<!-- 统一平台登录   -->
	<action id="uniteSignOn" userIdField="currentUserId" sessionContextName="APPSessionCtx" sessionIdFieldName="EMP_SID" type="session" class="com.yucheng.cmis.ad.mvc.ADSessionRequestController" checkSession="false">
		<flowInvoker>
			<operation class="com.yucheng.cmis.pub.base.UniteAttestationOp"/>
			<transition dest="core/userSignOnCusTrustee.jsp" condition="$retValue='success'"/>
			<transition dest="core/userSignOnMain.jsp" condition="$retValue='main'"/>
			<transition dest="core/signOnError.jsp" condition="$retValue='fail'"/>
			<transition dest="core/single.jsp" condition="$retValue='single'"/>
			<transition dest="core/signOnErrorSys.jsp" condition="$retValue='fail_sys'"/>
		</flowInvoker>
	</action>
	
	<!-- 登陆提交验证 -->
	<action id="userSignOn" userIdField="currentUserId" sessionContextName="APPSessionCtx" sessionIdFieldName="EMP_SID" type="session" class="com.yucheng.cmis.ad.mvc.ADSessionRequestController" checkSession="false">
		<flowInvoker>
			<operation class="com.yucheng.cmis.pub.base.CMISUserCheckOperation"/>
			<transition dest="core/userSignOnNext.jsp" condition="$retValue='success'"/>
			<transition dest="core/signOnError.jsp" condition="$retValue='fail'"/>
			<transition dest="core/single.jsp" condition="$retValue='single'"/>
		</flowInvoker>
	</action>
	
	<!-- 登录验证跳转页面 -->
	<action id="userSignOnNext" type="normal" checkSession="false" >
		<flowInvoker>
			<operation class="com.yucheng.cmis.pub.base.CMISUserSignOnNextOperation"/>
			<transition dest="next" condition="$retValue='next'"/>
			<transition dest="main" condition="$retValue='main'"/>
		</flowInvoker>
		<outputViews>
			<jspView id="next" url="core/welcome.jsp" />
			<jspView id="main" url="core/mainLayOut.jsp" />
		</outputViews>
	</action>
	<!-- 登录验证跳转页面 -->
	<action id="userSignOnLogin" type="normal" checkSession="false" >
		<flowInvoker>
			<operation class="com.yucheng.cmis.pub.base.CMISUserSignOnLoginOperation"/>
			<transition dest="retPage"/>
		</flowInvoker>
		<outputViews>
			<jspView id="retPage" url="core/mainLayOut.jsp" />
		</outputViews>
	</action>
	
	<!-- 签退时清理系统缓存  2014-01-23  -->
	<action id="signOut"  type="normal" checkSession="false">
	   	<flowInvoker>
			<operation class="com.yucheng.cmis.pub.base.CMISUserLogoutOp"/>
			<transition dest="retPage"/>
		</flowInvoker>
		<outputViews>
			<!--<jspView id="retPage" url="core/signOn.jsp" />-->
			<jspView id="retPage" url="core/logOut.jsp" />
		</outputViews>
	</action>
	
	<action id="toCheckSession" label="用于检查session" type="normal" checkSession="true">
		<jspView id="sessioninfo.jsp" url="core/sessioninfo.jsp"/>
	</action>

	<!-- add by lisj 2014-12-17 需求编号：【FX140619013】 十二级系统查看客户信息功能（系统通用跨域访问方法）  -->
	<action id="linkSystemPage" userIdField="currentUserId" sessionContextName="APPSessionCtx" sessionIdFieldName="EMP_SID" type="session" class="com.yucheng.cmis.ad.mvc.ADSessionRequestController" checkSession="false">
		<flowInvoker>
			<operation class="com.yucheng.cmis.pub.base.DynamicLinkSystemOp"/>
			<transition dest="core/linkSystemPage.jsp" condition="$retValue='success'"/>
			<transition dest="core/signOnError.jsp" condition="$retValue='failed'"/>
		</flowInvoker>
	</action>
	
</actionDefines>