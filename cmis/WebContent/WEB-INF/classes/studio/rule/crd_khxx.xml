<?xml version="1.0" encoding='GB18030'?>
<rule-set name="crd_khxx">

<java:import>java.lang.Object</java:import>
<java:import>java.lang.String</java:import>
<java:import>java.util.Map</java:import>
<java:import>com.ecc.emp.core.Context</java:import>
<java:import>com.ecc.shuffle.common.Utils</java:import>


<rule name="delete" salience="2" isolation="yes">
<db:columns>zlxr</db:columns>
<parameter identifier="context">
	<class>com.ecc.emp.core.Context</class>
</parameter>
<parameter identifier="paramMap">
	<class>java.util.HashMap</class>
</parameter>
<java:condition>true</java:condition>
<java:consequence> 
		String currentUserId = (String)context.getDataValue("currentUserId");
		String zlxr = (String)paramMap.get("zlxr");
		if(currentUserId != null &amp;&amp; currentUserId.equals(zlxr))
    	paramMap.put("_result_","1=1");
    else
    	paramMap.put("_result_","1=2");
</java:consequence>
</rule>

<rule name="update" salience="2" isolation="yes">
<db:columns>zlxr</db:columns>
<parameter identifier="context">
	<class>com.ecc.emp.core.Context</class>
</parameter>
<parameter identifier="paramMap">
	<class>java.util.HashMap</class>
</parameter>
<java:condition>true</java:condition>
<java:consequence> 
    String currentUserId = (String)context.getDataValue("currentUserId");
		String zlxr = (String)paramMap.get("zlxr");
		if(currentUserId != null &amp;&amp; currentUserId.equals(zlxr))
    	paramMap.put("_result_","1=1");
    else
    	paramMap.put("_result_","1=2");
</java:consequence>
</rule>


<rule name="query" salience="1" isolation="yes">
<parameter identifier="context">
	<class>com.ecc.emp.core.Context</class>
</parameter>
<parameter identifier="paramMap">
	<class>java.util.HashMap</class>
</parameter>
<java:condition>true</java:condition>
<java:consequence>
	String organno = (String)context.getDataValue("organNo");
	paramMap.put("_result_","zbjg like '"+organno+"%'");
</java:consequence>
</rule>



</rule-set>