<?xml version="1.0" encoding='ISO-8859-1'?>
<rule-set name="userinfo">

<java:import>java.lang.Object</java:import>
<java:import>java.lang.String</java:import>
<java:import>java.util.HashMap</java:import>
<java:import>com.ecc.emp.core.Context</java:import>
<java:import>com.ecc.shuffle.common.Utils</java:import>

<db:columns>email</db:columns>

<rule name="query" salience="1" isolation="yes">
<parameter identifier="context">
	<class>com.ecc.emp.core.Context</class>
</parameter>
<parameter identifier="paramMap">
	<class>java.util.HashMap</class>
</parameter>
<java:condition>true</java:condition>

<java:consequence>
	if(context.getDataValue("currentUserId").toString().equals("liujy")){
		paramMap.put("_result_","1=1");
	}
	else{   
		paramMap.put("_result_","1=1"); 
	}
</java:consequence>
</rule>

<rule name="update" salience="2" isolation="yes">
<parameter identifier="context">
	<class>com.ecc.emp.core.Context</class>
</parameter>
<parameter identifier="paramMap">
	<class>java.util.HashMap</class>
</parameter>
<java:condition>paramMap.get("author")!=null</java:condition>
<java:condition>paramMap.get("author").equals(context.getDataValue("a"))</java:condition>

<java:consequence> 
    paramMap.put("_result_","1=1");
</java:consequence>
</rule>

<rule name="delete" salience="2" isolation="yes">
<parameter identifier="context">
	<class>com.ecc.emp.core.Context</class>
</parameter>
<parameter identifier="paramMap">
	<class>java.util.HashMap</class>
</parameter>
<java:condition>paramMap.get("sign")!=null</java:condition>
<java:condition>paramMap.get("sign").equals("1")</java:condition>

<java:consequence> 
    paramMap.put("_result_","1=1");
</java:consequence>
</rule>

</rule-set>

